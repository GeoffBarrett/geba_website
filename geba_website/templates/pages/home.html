{% extends "core/base.html" %}

{% block title %}GEBA - Home {% endblock title %}

{% block header %}

    {% load staticfiles %}
    {% load crispy_forms_tags %}

{% endblock header %}

{% block content %}

    <!-- Page Header -->
    {% if page.header_image %}
        <header class="masthead" style="background-image: url({{ page.header_image.url }})">
          <div class="container">
            <div class="row">
              <div class="col-lg-8 col-md-10 mx-auto">
                <div class="post-heading">
                    <div class="site-heading">
                        <h1>{{ page.title }}</h1>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </header>
    {% endif %}

    <article>
        <div class="container">
            {% if page.header_image == '' %}
                <div class="row no-header justify-content-md-center">
                    {% if user.is_superuser %}
                        <div class="col-8">
                            <div class="post-heading">
                                <h1>{{ page.title }}</h1>
                                <hr>
                            </div>
                        </div>
                        <div class="col-1">
                        </div>
                    {% else %}
                        <div class="col-8">
                            <div class="post-heading">
                                <h1>{{ page.title }}</h1>
                                <hr>
                            </div>
                        </div>
                    {% endif %}
                </div>
            {% endif %}

            <div class="row justify-content-md-center mt-3">
                {% if user.is_superuser %}
                    <div class="col-8 content-markdown">
                        <div class="post-body">{{ page.get_html }}</div>
                    </div>
                    <div class="col-1">
                        <a href="{% url 'pages:update' page.slug %}"><span class="fa fa-pencil"></span></a>
                    </div>
                {% else %}
                    <div class="col-8 content-markdown mb-3">
                        <div class="post-body">{{ page.get_html }}</div>
                    </div>
                {% endif %}
            </div>

            {% for latest_model in Latest %}
                <div class="row justify-content-md-center">
                    <div class="col-8">
                        <div class="row">
                            <h2 class="">{{ latest_model.0 }} </h2>
                        </div>

                        <div class="card mb-4">
                             {% if latest_model.1.image %}
                                <img class="card-img-top" src="{{ latest_model.1.image.url }}" alt="">
                             {% else %}
                                <img class="card-img-top" src="http://placehold.it/700x300" alt="">
                             {% endif %}

                            <div class="card-body">

                                <h2 class="card-title">
                                    <div class="row">
                                        <div class="col-12">
                                            {{ latest_model.1.title }}
                                        </div>
                                    </div>
                                </h2>

                                <p class="card-text">

                                    {% if latest_model.1.description %}
                                        {{ latest_model.1.description }}
                                    {% else %}
                                        {% if latest_model.1.get_html %}
                                            {{ latest_model.1.get_html|truncatechars_html:250 }}
                                        {% else %}
                                            <span style='color:red;'> No Description! </span>
                                        {% endif %}
                                    {% endif %}

                                </p>
                                {% if latest_model.1.keywords %}
                                    <p class="card-text">Keywords: {{ latest_model.1.keywords }}</p>
                                {% endif %}
                                <a class="btn btn-primary" href="{{ latest_model.1.get_absolute_url }}">Read More â†’</a>
                            </div>

                            <div class="card-footer text-muted">
                                Published by
                                {% if latest_model.1.author %}
                                    <a href="#">{{ latest_model.1.author }}</a>
                                    | {{ latest_model.1.publish_date|date:"m-d-Y" }}
                                {% else %}
                                    <span style='color:red;'> No Authors! </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
            {% endfor %}

        </div>
    </article>
{% endblock content %}

{% block javascript %}

{% endblock javascript %}